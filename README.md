# CustomerOrderManager

Консольное приложение для управления клиентами, заказами и купонами с использованием Hibernate и Spring Context.

## Описание

Приложение предоставляет полный функционал CRUD для управления:
- Клиентами и их профилями
- Заказами с различными статусами
- Купонами со скидками
- Поиском заказов по фильтрам

## Технологии

- **Java 17**
- **Hibernate 6.6** - ORM для работы с базой данных
- **Spring Context** - контейнер IoC и внедрение зависимостей
- **PostgreSQL** - реляционная база данных
- **Maven** - управление зависимостями

## Особенности

### Архитектура
- Четкое разделение на слои: Entity, Service, Helper
- Использование паттерна Repository через Hibernate Session
- Транзакционное управление через собственный TransactionHelper
- Наследование BaseService для избежания дублирования кода

### Hibernate особенности
- OneToOne связь (Клиент ↔ Профиль)
- OneToMany связь (Клиент → Заказы)
- ManyToMany связь (Клиент ↔ Купоны)
- Fetch Join для решения проблемы N+1 запросов
- Каскадные операции для автоматического сохранения связанных сущностей

## Функционал

1. **Управление клиентами**
   - Добавление клиентов с автоматическим созданием профилей
   - Удаление клиентов (включая связанные данные)
   - Редактирование профилей

2. **Работа с заказами**
   - Создание заказов для существующих клиентов
   - Поиск заказов по дате, сумме, статусу
   - Просмотр всех клиентов с их заказами (fetch join)

3. **Купоны и скидки**
   - Редактирование купонов по ID
   - Управление кодами и процентами скидок

## Логирование и отладка

Приложение выводит SQL-запросы Hibernate для наглядности работы с базой данных,
например:
```sql
Hibernate: 
       select
        p1_0.id,
        p1_0.address,
        c1_0.id,
        c1_0.email,
        c1_0.name,
        c1_0.reg_date,
        p1_0.phone 
    from
        profile p1_0 
    left join
        client c1_0 
            on c1_0.id=p1_0.client_id 
    where
        p1_0.client_id=?
```

Это позволяет видеть, какие запросы выполняются к базе данных.


## Меню при запуске программы: 

Главное меню:
1. Добавить клиента
2. Удалить клиента
3. Редактировать профиль
4. Добавить заказ
5. Редактировать купоны
6. Найти заказы
7. Вывести всех клиентов с заказами
8. Выход
